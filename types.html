
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Types &#8212; APSW 3.40.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/classic.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="copyright" title="Copyright" href="copyright.html" />
    <link rel="next" title="Execution and tracing" href="execution.html" />
    <link rel="prev" title="Exceptions and Errors" href="exceptions.html" />
 
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2NR9GDCQLT"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-2NR9GDCQLT');
</script>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="execution.html" title="Execution and tracing"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="exceptions.html" title="Exceptions and Errors"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">APSW 3.40.1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Types</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="types">
<span id="id1"></span><h1>Types<a class="headerlink" href="#types" title="Permalink to this heading">¶</a></h1>
<p>Read about <a class="reference external" href="https://sqlite.org/datatype3.html">SQLite 3 types</a>. ASPW always maintains the
correct type for values, and never converts them to something
else. Note however that SQLite may convert types based on column
affinity as <a class="reference external" href="https://sqlite.org/datatype3.html">described</a>. ASPW
requires that all values supplied are one of the corresponding
Python/SQLite types (or a subclass).</p>
<section id="mapping">
<h2>Mapping<a class="headerlink" href="#mapping" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>None in Python is NULL in SQLite</p></li>
<li><p>Python int is INTEGER in SQLite. The value represented must fit
within a 64 bit signed quantity (long long at the C level) or an
overflow exception is generated.</p></li>
<li><p>Python’s float type is used for REAL in SQLite. (At the C level they
are both 8 byte quantities and there is no loss of precision).</p></li>
<li><p>The str (unicode) type is used.</p></li>
<li><p>The bytes type is used, although you can use anything meeting the
<a class="reference external" href="https://docs.python.org/3/c-api/buffer.html">buffer protocol</a></p></li>
</ul>
</section>
<section id="unicode">
<span id="id2"></span><h2>Unicode<a class="headerlink" href="#unicode" title="Permalink to this heading">¶</a></h2>
<p>All SQLite strings are Unicode. The actual binary representations can
be UTF8, or UTF16 in either byte order. ASPW uses the UTF8 interface
to SQLite which results in the binary string representation in your
database defaulting to UTF8 as well. All this is totally transparent
to your Python code.</p>
<p>Everywhere strings are used (eg as database values, SQL statements,
bindings names, user defined functions) you use Unicode strings
as the Python str type.</p>
<p>When returning text values from SQLite, ASPW always uses the Python
unicode class.</p>
<p>If you don’t know much about Unicode then read <a class="reference external" href="http://www.joelonsoftware.com/articles/Unicode.html">Joel’s article</a>.  SQLite does
not include conversion from random non-Unicode encodings to or from
Unicode.  (It does include conversion between 8 bit and 16 bit Unicode
encodings).</p>
<p>If you don’t want to use Unicode and instead want a simple bytes in
are the same bytes out then you should only use blobs.</p>
<p>If you want to do manipulation of unicode text such as upper/lower
casing or sorting then you need to know about locales.  This is
because the exact same sequence of characters sort, upper case, lower
case etc differently depending on where you are.  As an example Turkic
languages have multiple letter i, German has ß which behaves like ss,
various accents sort differently in different European countries.
Fortunately there is a library you can ask to do the right locale
specific thing <a class="reference external" href="http://en.wikipedia.org/wiki/International_Components_for_Unicode">ICU</a>.
A default SQLite compilation only deals with the 26 letter Roman
alphabet.  If you enable ICU with SQLite then you get <a class="reference external" href="https://sqlite.org/src/finfo?name=ext/icu/README.txt">good stuff</a>.
See the <a class="reference internal" href="build.html#building"><span class="std std-ref">Building</span></a> section on how to enable ICU for SQLite with
APSW.  Note that Python does not currently include ICU support and
hence sorting, upper/lower casing etc are limited and do not take
locales into account.</p>
<p>In summary, never confuse bytes with strings (which C sadly treats as
the same thing).  Either always use bytes (and SQLite blobs) for
everything or use strings (and SQLite strings) for everything.  If you
take the latter approach and have to deal with external input/output
then you must know what encodings are being used and it is best to
convert to Unicode as early as possible on input and late as possible on
output.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Types</a><ul>
<li><a class="reference internal" href="#mapping">Mapping</a></li>
<li><a class="reference internal" href="#unicode">Unicode</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="exceptions.html"
                          title="previous chapter">Exceptions and Errors</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="execution.html"
                          title="next chapter">Execution and tracing</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/types.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="execution.html" title="Execution and tracing"
             >next</a> |</li>
        <li class="right" >
          <a href="exceptions.html" title="Exceptions and Errors"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">APSW 3.40.1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Types</a></li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; <a href="copyright.html">Copyright</a> 2004-2023, Roger Binns &lt;rogerb@rogerbinns.com&gt;.
      Last updated on Jan 15, 2023.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.2.0.
    </div>
<div class="footer">This page uses <a href="http://analytics.google.com/">
Google Analytics</a> to collect statistics.
</div>

  </body>
</html>